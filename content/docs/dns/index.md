---
title: 'Тонкости DNS'
weight: 6
toc: true
---

Podkop берёт на себя роль DNS-резолвера. Самая обычная схема:
> ПК - Dnsmasq 0.0.0.0:53 - Sing-box 127.0.0.42:53 - DNS-server

Таким образом, если вам нужно поменять DNS-сервер, это делается в настройках Podkop (Additional Settings).

По умолчанию, при первой установке, используется стандартный UDP-сервер 8.8.8.8, вы можете изменить его на любой другой по своему выбору.

Поддерживаются три типа DNS:
- DoH (DNS over HTTPS)
- DoT (DNS over TLS)
- UDP (Без шифрования)

[Читайте это](/docs/adguard/), если вам необходимо совместить работу с AdGuard.

# Проблемы с DoH/DoT

В последнее время много жалоб на нестабильную работу DoH/DoT. Пока причина не до конца ясна, но, скорее всего, это "устаревание серверов".

Если вы используете такие технологии, как VLESS или Shadowsocks, то Xray/Sing-box на сервере уже самостоятельно резолвит доменные имена ресурсов из списков и вам достаточно указать DNS-сервер в опции **DNS-сервер**, которая находится в дополнительных настройках Podkop.

Рекомендуем для режима **Proxy** использовать обычный UDP-сервер вашего провайдера или публичные резолверы (8.8.8.8, 1.1.1.1 и т.д.) для ресурсов не из списков и нужд Podkop.

Если вы используете Wireguard, AWG, OpenConnect, OpenVPN и т.п., начиная с версии 0.4.5 реализован **Split DNS**. Вы можете выбрать, какой сервер использовать для резолвинга доменов из списков - запросы будут идти через ваш туннель. Эта настройка включена по умолчанию. 
Так вы избегаете проблем с DoH/DoT, при этом запросы к важным ресурсам остаются зашифрованными.

Если вы используете только VLESS и аналогичные протоколы, **Split DNS** можно отключить - он не будет мешать, но и не нужен.

Всем, кто не готов разбираться с шифроваными DNS рекомендую использовать **Split DNS** + DNS по UDP, при использовании [туннелей](/docs/tunnels/). Она включена по умолчанию для минимизации проблем и обращений к нам.
