---
title: 'DNS на клиентах'
weight: 25
toc: true
---

Чтобы podkop работал корректно, необходимо, чтобы клиенты использовали роутер в качестве DNS-сервера. 

Если у вас запрос
```nslookup fakeip.podkop.fyi```
Не резолвится в IP-адрес из подсети **198.18.0.0/15**, то проблема либо в неправильно настроенном сетевом интерфейсе, либо в DoH, включённом в браузере. Если речь идёт про Android, то проблема может быть в том, что вся система использует DoH.

DoH нет на уровне систем iOS, MacOS и Linux. В Windows 11 DoH появилась на уровне системы, но по умолчанию выключена. 

В Safari DoH отсутствует. Обратите внимание, что в ОС, перечисленных выше, DoH может быть включён на уровне браузера.

Далее приведены инструкции как это отключить в разных случаях.

# Браузеры
Все популярные браузеры используют DoH по умолчанию, это означает, что все DNS-запросы идут мимо роутера.

## Chrome
**Настройки | Settings** - **Приватность и безопасность | Privacy and security**

Промотайте вниз до **Использовать безопасный DNS | Use secure DNS** и выключите его.
![Chrome DoH](clientdns-chrome.png)

## FireFox
**Настройки | Settings** - **Приватность и безопасность | Privacy & security**

Промотайте вниз до **DNS over HTTPS** и выберите **Off**.
![FireFox DoH](clientdns-firefox.png)

# Android
Во всех последних версиях Android DoH включён на уровне системы, там он именуется **Приватный DNS | Private DNS**.

Проще всего найти его по поиску, введя **Private DNS**.

Либо **Настройки | Settings** - **Подключения и обмен** - **Приватный DNS | Private DNS**

![Android PrivateDNS](clientdns-android.jpg)

# Windows
В Windows 11 DoH на уровне системы можно включить только специально в режиме ручной настройки DNS. Если вы это не трогали, то скорее всего, он у вас выключен. Это легко проверить.

Для кабеля и Wi-Fi он включается и отключается в свойствах подключения.

### Ethernet (кабель)
**Сеть и Интернет | Network & internet** - **Ethernet**

Опция **Назначение DNS-сервера | DNS server assignment** должна стоять в режиме **Автоматически | Automatic (DHCP)**

![Winodows Ethernet](windows-doh-ethernet.png)

### Wi-Fi
**Сеть и Интернет | Network & internet** - **Wi-Fi**

Выбираете свойства вашего подключения

Опция **Назначение DNS-сервера | DNS server assignment** должна стоять в режиме **Автоматически | Automatic (DHCP)**

![Winodows Wi-Fi](windows-doh-wifi.png)

---

Проверьте, что в информации о подключении в пункте **IPv4 DNS servers** указан ваш роутер.

![Winodows interface](windows-interface.png)

# Другие ОС
Необходимо, чтобы на интерфейсе устройства был настроен роутер в качестве DNS-сервера.

Во-первых проверьте, что интерфейс получает настройки от роутера по DHCP.
![OS Interface DHCP](clientdns-interface-dhcp.png)

Если вы используете статику и она вам необходима, то в DNS обязательно должен быть указан роутер в качестве DNS.

Во-вторых проверьте, что интерфейс получил в качестве DNS-сервера IP-адрес роутера.

![OS Interface router dns](clientdns-interface-router.png)
